<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>HTTP. Servlets. 35. Cookies</h1>
<p>
    Чтобы разобраться с куки сначала перейдём на сайт google.com и откроем вкладку Application в dev tools:
</p>
<img src="commit-35-1.png" width="100%"/>
<p>
    Здесь хранятся все данные, которые хранятся на стороне клиента. Т.е. что хранит браузер у себя для каждого
    из сайтов. По сути, тут есть какие-то данные, которые требуется хранить на стороне клиента, например идентификатор
    доступа, какие-то закэшеированные данные и прочее.
</p>
<p>
    В данном случае, в левой панели мы так же можем заметить эти хранилища:
</p>
<img src="commit-35-2.png" width="15%"/>
<p>
    К session storage можно легко достучаться используя JS. Есть всякие базы данных, так же есть и куки. Откроем их:
</p>
<img src="commit-35-3.png" width="100%"/>
<p>
    Куки - это тоже данные, которые хранятся на стороне клиента и главный из них - это название (Name) и его значение
    (Value). Есть так же дополнительные поля, такие как домен (Domain), путь (Path), время жизни куки (Expires/Max-Age),
    размер (Size). Названий много, но главное название и значение, который используется как клиентом, так и сервером.
</p>
<h2>Как cookies оказываются на стороне клиента и сервера</h2>
<img src="commit-35-4.png" width="60%"/>
<p>
    Идёт общение между клиентом и сервером, и клиент просто отправляет запрос серверу, и сервер возвращает ответ.
</p>
Что делает клиент:
<ol>
    <li>
        Получает все cookies по домену сервера (Domain), куда идёт запрос. Т.е. это поле Domain, который есть
        у каждого из куки. Следовательно, по этому домену можно определить какие куки нужны для отправки на сервер.
        Мы ведь по разным сайтам можем лазить из нашего браузера и следовательно, у каждого сайта будут свои куки,
        потому что у каждого из них свой домен.
    </li>
    <li>
        Далее, второй шаг, это преобразовать все куки в один <b>header</b> с названием <code>Cookie</code> и беря самые
        важные поля: <code>name1=value1; name2=value2</code>, перечисляя их через точку с запятой.
    </li>
    <li>
        Всё, что остаётся - это отправить header с запросом.
    </li>
</ol>
<p>
    Т.к. у нас нет ничего кроме заголовка <b>header</b> & <b>body</b>, логично предположить, что куки нужно как-то
    отправлять. Поэтому, <i>cookie - это обычный header с название cookie</i>.
    <br>
    Напоминание: протокол HTTP не чувствителен к регистру своих заголовков, но в HTTP/2 принято использовать
    заглавные буквы для именования заголовков.
</p>
<p>
    Далее, на стороне сервера мы можем извлечь эти куки, потому что это обычный заголовок. Но самое интересное это то,
    как они получаются на стороне сервера, а всё довольно просто - сервер может их установить для клиента. И для этого
    он в ответе должен отправить соответствующий заголовок, который называется <code>Set-Cookie</code> и опять
    разделяем через точку с запятой все значения этих кук. Главное понимать, что для каждого из кук мы должны
    установить свой заголовок <b>Set-Cookie</b>.
</p>
</body>
</html>