<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>HTTP. Servlets. 36. Session</h1>
<img src="commit-36-1.png" width="60%"/>
<p>
    Сессия - это всего лишь время между открытием соединения с сервером и его закрытием, между которым клиент и сервер
    может обмениваться сколько угодно раз.
</p>
<p>
    Дело в том, что у нас есть множество HttpServletRequest'ов и нам нужно как-то понять, что эти запросы исходят
    из одного и того же пользователя. Другими словами говоря, когда заходим на какой-нибудь сайт (гитхаб) и логинетесь
    туда, то все последующий запросы сервер понимает, что они идут от определённого клиента и отображают только
    информацию для конкретного пользователя, хотя пользователей на сайте очень много. Для этого существуют <b>сессии</b>.
    Т.е. для того, чтобы обработать множество запросов, которые идут на сервер с одной и той же сессии.
</p>
<p>
    Существует несколько вариантов как это реализовывается, но рассмотрим дефолтный, который идёт от Apache Tomcat.
    Для этого будем использовать:
</p>
<pre>Cookie: <text style="color: blue">JSESSIONID</text>=<text style="color: red">GY789SD8T9GAS......</text></pre>
<p>
    Т.е. когда отправляем запрос серверу, то используется куки с названием <code><text style="color: blue">JSESSIONID</text></code>
    и её идентификатор (идентификатор сессии), если такая куки есть. Если такой куки нет, то этот запрос пришёл впервые
    на сервер, а на стороне сервера, в каталине сервлет контейнере есть обычный ассоциативный массив, где ключом
    является <code><text style="color: blue">JSESSIONID</text></code>, а значением объект типа <code>Session</code>.
    Если у нас нет куки, тогда её нужно создать (сессию) и положить в этот ассоциативный массив и вернуть
    <code>Set-Cookie</code> с установленным значением этой сессии. В последующем запросы просто приходят с этой кукой
    и сервер уже обрабатывает это значение на объект типа <code>Session</code>.
</p>
<h3>В отличии от cookie, session хранятся на стороне сервера, в ассоциативном массиве.</h3>
<img src="commit-36-2.png" width="100%" />
</body>
</html>